(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(6949)}])},6949:function(g,b,a){"use strict";a.r(b),a.d(b,{default:function(){return F}});var h=a(5893),c=a(7294),i=a(5333),j=a(1799),k=a(9396),l=a(828),m=a(9815),n=a(1438),o=a(8029),p=a(6567),q=a(6886),r=a(7470),s=function(d){(0,o.Z)(b,d);var e=(0,p.Z)(b);function b(c,d){var a;return(0,n.Z)(this,b),(a=e.call(this,c)).file=c.file,a.HeightL=!1,a.itemsPerRow=c.itemsPerRow,a.id=c.id,a.pdfDimensionIndexed=[],a.margin=c.margin,a.state={pdfDimension:{width:[],height:[]},numPages:1,expanded:!1},a}var a=b.prototype;return a.shouldComponentUpdate=function(a,b){return this.itemsPerRow=a.itemsPerRow,this.margin=a.margin,this.props.itemsPerRow!==a.itemsPerRow||this.props.margin!==a.margin||this.state!==b},a.overflowBound=function(a){var b=a>(this.HeightL?2:3)*(this.itemsPerRow+(this.HeightL?1:0))?(this.HeightL?2:3)*(this.itemsPerRow+(this.HeightL?1:0)):a;return[b,a-b>(this.HeightL?2:3)?this.HeightL?2:3:a>b?a-b:0]},a.render=function(){var a=this;return(0,h.jsxs)(c.Fragment,{children:[(0,h.jsxs)(i.Z,{sx:{padding:"4px 8px 0 8px",display:"flex",justifyContent:"space-between",alignItems:"end"},children:[(0,h.jsx)(i.Z,{sx:{padding:"3px 4px",color:"rgb(100, 100, 100)",fontSize:"calc(0.5vw + 8px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:this.file.file.name}),(0,h.jsxs)(i.Z,{sx:{display:"flex",flexShrink:"0","& button":{fontSize:"calc(0.5vw + 8px)"}},children:[0!==this.overflowBound(this.state.numPages)[1]?(0,h.jsx)(q.Z,{onClick:function(){var b=a;a.setState(function(a){return(0,k.Z)((0,j.Z)({},a),{expanded:!b.state.expanded})})},sx:{textTransform:"unset",color:"#adadad",borderRadius:"4px",padding:"3px 4px"},children:this.state.expanded?"Collapse Pages":"Expand Pages"}):null,(0,h.jsx)(q.Z,{onClick:function(){var b=a;a.props.setDataTransferList(function(a){var c=b;return a.filter(function(a){return a!=c.file})})},sx:{textTransform:"unset",color:"#e76464",borderRadius:"4px 8px 4px 4px",padding:"3px 4px"},children:"Delete File"})]})]}),(0,h.jsx)(i.Z,{id:this.id,sx:{padding:"0 8px 4px 8px"},children:(0,h.jsx)(i.Z,{sx:{backgroundColor:"rgb(100 100 100 / 10%)",borderRadius:"8px",padding:"5px","& > div":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",width:"100%",position:"relative"}},children:(0,h.jsxs)(r.BB,{file:this.file.file,onLoadSuccess:function(b){a.setState(function(a){return(0,k.Z)((0,j.Z)({},a),{numPages:b.numPages})})},children:[Array.from({length:this.state.expanded?this.state.numPages:this.overflowBound(this.state.numPages)[0]},function(b,a){return a+1}).map(function(e){var b,d,c=a;return(0,h.jsx)(i.Z,{sx:{width:"calc(100% / ".concat(a.itemsPerRow+(a.HeightL?1:0),")"),paddingTop:"calc(100% * ".concat(0==a.state.pdfDimension.width.length||0==a.state.pdfDimension.height.length?1:(a.state.pdfDimension.height.reduce(function(a,b){return a+b})/a.state.pdfDimension.height.length+(parseInt("-"===a.margin.top?"0":a.margin.top)+parseInt("-"===a.margin.bottom?"0":a.margin.bottom))*30)/(a.state.pdfDimension.width.reduce(function(a,b){return a+b})/a.state.pdfDimension.width.length+(parseInt("-"===a.margin.left?"0":a.margin.left)+parseInt("-"===a.margin.right?"0":a.margin.right))*30)," / ").concat(a.itemsPerRow+(a.HeightL?1:0),")"),transition:"padding-top .3s linear",position:"relative",height:0},children:(0,h.jsx)(i.Z,{sx:{position:"absolute",top:0,width:"100%",height:"100%",padding:"min(5px, 2%)",display:"flex",alignItems:"center"},children:(0,h.jsx)(i.Z,{sx:{maxWidth:"100%",maxHeight:"100%",display:"flex","& div":{maxWidth:"100% !important",maxHeight:"100% !important"},"& > div":{display:"flex",justifyContent:"center",position:"relative"},"& > div > div":{display:"none"},"& canvas":{maxWidth:"100% !important",maxHeight:"100% !important",width:"auto !important",height:"auto !important",margin:"auto auto",borderRadius:"4px",boxShadow:"2px 3px 24px 0px rgb(0 0 0 / 16%), 1px 1px 12px 0px rgb(0 0 0 / 16%)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",backgroundColor:"white",color:"white",padding:(b=a.pdfDimensionIndexed.find(function(a){return a.index==e}),d=0==a.state.pdfDimension.width.length||0==a.state.pdfDimension.height.length?1:a.state.pdfDimension.height.reduce(function(a,b){return a+b})/a.state.pdfDimension.height.length/(a.state.pdfDimension.width.reduce(function(a,b){return a+b})/a.state.pdfDimension.width.length)/(a.itemsPerRow+(a.HeightL?1:0)),b?"".concat(d<b.height/b.width?parseInt("-"===c.margin.top?"0":c.margin.top)*d*6700/b.height:6700*parseInt("-"===c.margin.top?"0":c.margin.top)/b.width,"% ").concat(parseInt("-"===c.margin.right?"0":c.margin.right)*d*6700/b.height,"% ").concat(d<b.height/b.width?parseInt("-"===c.margin.bottom?"0":c.margin.bottom)*d*6700/b.height:6700*parseInt("-"===c.margin.bottom?"0":c.margin.bottom)/b.width,"% ").concat(parseInt("-"===c.margin.left?"0":c.margin.left)*d*6700/b.height,"%"):"0px")}},children:(0,h.jsx)(r.T3,{pageNumber:e,height:0,onLoadSuccess:function(a){var b=c;c.setState(function(c){return b.HeightL=(0,m.Z)(c.pdfDimension.height).concat([a.height]).reduce(function(a,b){return a+b})>(0,m.Z)(c.pdfDimension.width).concat([a.width]).reduce(function(a,b){return a+b}),b.pdfDimensionIndexed.push({index:e,width:a.width,height:a.height}),(0,k.Z)((0,j.Z)({},c),{pdfDimension:{width:(0,m.Z)(c.pdfDimension.width).concat([a.width]),height:(0,m.Z)(c.pdfDimension.height).concat([a.height])}})})}})})})},e)}),Array.from({length:this.state.expanded?0:this.overflowBound(this.state.numPages)[1]},function(b,a){return a+1}).map(function(e){var b,d,c=a;return(0,h.jsx)(i.Z,{sx:{width:"calc(100% / ".concat(a.itemsPerRow+(a.HeightL?1:0),")"),paddingTop:"calc(100% * ".concat(0==a.state.pdfDimension.width.length||0==a.state.pdfDimension.height.length?1:(a.state.pdfDimension.height.reduce(function(a,b){return a+b})/a.state.pdfDimension.height.length+(parseInt("-"===a.margin.top?"0":a.margin.top)+parseInt("-"===a.margin.bottom?"0":a.margin.bottom))*30)/(a.state.pdfDimension.width.reduce(function(a,b){return a+b})/a.state.pdfDimension.width.length+(parseInt("-"===a.margin.left?"0":a.margin.left)+parseInt("-"===a.margin.right?"0":a.margin.right))*30)," / ").concat(a.itemsPerRow+(a.HeightL?1:0),")"),transition:"padding-top .3s linear",position:"absolute",bottom:0,right:0,height:0,zIndex:1==e?10:2==e?-10:-20,transform:1==e?"rotate(4deg)":2==e?"rotate(-4deg)":"rotate(-8deg)"},children:(0,h.jsx)(i.Z,{sx:{position:"absolute",top:0,width:"100%",height:"100%",padding:"min(5px, 2%)",display:"flex",alignItems:"center"},children:(0,h.jsx)(i.Z,{sx:{maxWidth:"100%",maxHeight:"100%",display:"flex","& div":{maxWidth:"100% !important",maxHeight:"100% !important"},"& > div":{display:"flex",justifyContent:"center",position:"relative"},"& > div > div":{display:"none"},"& canvas":{maxWidth:"100% !important",maxHeight:"100% !important",width:"auto !important",height:"auto !important",margin:"auto auto",borderRadius:"4px",boxShadow:"2px 3px 24px 0px rgb(0 0 0 / 3%), 1px 1px 12px 0px rgb(0 0 0 / 10%)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",backgroundColor:"white",color:"white",padding:(b=a.pdfDimensionIndexed.find(function(a){return a.index==e}),d=0==a.state.pdfDimension.width.length||0==a.state.pdfDimension.height.length?1:a.state.pdfDimension.height.reduce(function(a,b){return a+b})/a.state.pdfDimension.height.length/(a.state.pdfDimension.width.reduce(function(a,b){return a+b})/a.state.pdfDimension.width.length)/(a.itemsPerRow+(a.HeightL?1:0)),b?"".concat(d<b.height/b.width?parseInt("-"===c.margin.top?"0":c.margin.top)*d*6700/b.height:6700*parseInt("-"===c.margin.top?"0":c.margin.top)/b.width,"% ").concat(parseInt("-"===c.margin.right?"0":c.margin.right)*d*6700/b.height,"% ").concat(d<b.height/b.width?parseInt("-"===c.margin.bottom?"0":c.margin.bottom)*d*6700/b.height:6700*parseInt("-"===c.margin.bottom?"0":c.margin.bottom)/b.width,"% ").concat(parseInt("-"===c.margin.left?"0":c.margin.left)*d*6700/b.height,"%"):"0px")}},children:(0,h.jsx)(r.T3,{pageNumber:a.overflowBound(a.state.numPages)[0],height:0,onLoadSuccess:function(a){var b=c;c.setState(function(c){return b.HeightL=(0,m.Z)(c.pdfDimension.height).concat([a.height]).reduce(function(a,b){return a+b})>(0,m.Z)(c.pdfDimension.width).concat([a.width]).reduce(function(a,b){return a+b}),(0,k.Z)((0,j.Z)({},c),{pdfDimension:{width:(0,m.Z)(c.pdfDimension.width).concat([a.width]),height:(0,m.Z)(c.pdfDimension.height).concat([a.height])}})})}})})})},e+a.overflowBound(a.state.numPages)[0])})]})})})]})},b}(c.Component),t=a(5948),u=function(a){var f=a.dataTransferList,o=a.setDataTransferList,b=a.sx,p=a.itemsPerRow,g=a.fileInputRef,q=a.margin,d=(0,c.useState)(!1),r=(d[0],d[1]),u=(0,c.useRef)(0),e=(0,c.useState)(!1),n=e[0],v=e[1];(0,c.useEffect)(function(){v(!0)},[]);var w=function(b,c,d){var a=Array.from(b),e=(0,l.Z)(a.splice(c,1),1)[0];return a.splice(d,0,e),a};return(0,h.jsx)(i.Z,{onSubmit:function(a){return a.preventDefault()},sx:{minHeight:b.height,width:b.width,userSelect:"none"},children:(0,h.jsxs)(i.Z,{onDragOver:function(a){a.preventDefault()},onDragEnter:function(a){a.preventDefault(),a.stopPropagation(),r(!0)},onDragLeave:function(a){a.preventDefault(),a.stopPropagation(),r(!1)},onDrop:function(a){a.preventDefault(),a.stopPropagation(),r(!1);var b=a.dataTransfer.files;b&&b.length&&Array.from(b).forEach(function(a){"application/pdf"==a.type&&o(function(b){return(0,m.Z)(b).concat([{file:a,index:u.current++}])})})},sx:{border:"2px dashed rgb(128, 128, 128)",padding:"0px",width:"100%",minHeight:"inherit",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[(0,h.jsx)(i.Z,{sx:{display:"none"},children:(0,h.jsx)("input",{ref:g,accept:"application/pdf",onClick:function(a){a.target.value=""},type:"file",multiple:!0,onChange:function(b){b.preventDefault();var a=b.target.files;a&&a.length&&Array.from(a).forEach(function(a){"application/pdf"==a.type&&o(function(b){return(0,m.Z)(b).concat([{file:a,index:u.current++}])})})}})}),(0,h.jsx)(i.Z,{sx:{display:0==f.length?"flex":"none",justifyContent:"center",alignItems:"center",width:"100%",position:"absolute"},children:"Drop PDF files Here"}),(0,h.jsx)(i.Z,{sx:{width:"100%",minHeight:"inherit","& > div":{paddingBottom:"4px"}},children:n?(0,h.jsx)(t.Z5,{onDragEnd:function(a){a.destination&&o(function(b){return w(b,a.source.index,a.destination.index)})},children:(0,h.jsx)(t.bK,{droppableId:"droppable",children:function(a,b){return(0,h.jsxs)(i.Z,(0,k.Z)((0,j.Z)({ref:a.innerRef},a.droppableProps),{children:[f.map(function(a,d){var b,e,c;return(0,h.jsx)(t._l,{draggableId:(null!==(b=a.file)&& void 0!==b?b:{name:null}).name+a.index,index:d,children:function(b,c){return(0,h.jsx)(i.Z,(0,k.Z)((0,j.Z)({ref:b.innerRef},b.draggableProps,b.dragHandleProps),{children:(0,h.jsx)(s,{id:(null!==(e=a.file)&& void 0!==e?e:{name:null}).name+a.index,file:a,margin:q,itemsPerRow:p,setDataTransferList:o})}))}},(null!==(c=a.file)&& void 0!==c?c:{name:null}).name+a.index)}),a.placeholder]}))}})}):null})]})})},v=a(3321),w=a(8456),d=a(1163),x=a.n(d),y=a(7058),z=function(b){var a=b.margin,c=b.setMargin;return(0,h.jsxs)(i.Z,{sx:{display:"grid",gridTemplateRows:"1fr 2fr 1fr",gridTemplateColumns:"1fr 1fr 1fr",width:"100%",height:"100%"},children:[(0,h.jsx)(i.Z,{}),(0,h.jsx)(i.Z,{sx:{margin:"auto auto 0 auto"},children:(0,h.jsx)(y.Z,{size:"small",sx:{maxWidth:"80px"},value:a.top,onChange:function(a){c(function(b){return(0,k.Z)((0,j.Z)({},b),{top:"-"===a.target.value||"--"===a.target.value||"0-"===a.target.value||"-0"===a.target.value?"-":String(parseInt(""===a.target.value?"0":a.target.value))})})}})}),(0,h.jsx)(i.Z,{}),(0,h.jsx)(i.Z,{sx:{margin:"auto 0 auto auto"},children:(0,h.jsx)(y.Z,{size:"small",sx:{maxWidth:"80px"},value:a.left,onChange:function(a){c(function(b){return(0,k.Z)((0,j.Z)({},b),{left:"-"===a.target.value||"--"===a.target.value||"0-"===a.target.value||"-0"===a.target.value?"-":String(parseInt(""===a.target.value?"0":a.target.value))})})}})}),(0,h.jsx)(i.Z,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,h.jsx)(i.Z,{sx:{width:"min(100%, 100px)",height:"min(100%, 100px)",borderRadius:"4px",boxShadow:"2px 3px 12px 0px rgb(0 0 0 / 8%), 1px 1px 12px 0px rgb(0 0 0 / 8%)",backgroundColor:"rgb(252, 246, 227)"}})}),(0,h.jsx)(i.Z,{sx:{margin:"auto auto auto 0"},children:(0,h.jsx)(y.Z,{size:"small",sx:{maxWidth:"80px"},value:a.right,onChange:function(a){c(function(b){return(0,k.Z)((0,j.Z)({},b),{right:"-"===a.target.value||"--"===a.target.value||"0-"===a.target.value||"-0"===a.target.value?"-":String(parseInt(""===a.target.value?"0":a.target.value))})})}})}),(0,h.jsx)(i.Z,{}),(0,h.jsx)(i.Z,{sx:{margin:"0 auto auto auto"},children:(0,h.jsx)(y.Z,{size:"small",sx:{maxWidth:"80px"},value:a.bottom,onChange:function(a){c(function(b){return(0,k.Z)((0,j.Z)({},b),{bottom:"-"===a.target.value||"--"===a.target.value||"0-"===a.target.value||"-0"===a.target.value?"-":String(parseInt(""===a.target.value?"0":a.target.value))})})}})}),(0,h.jsx)(i.Z,{})]})},A=a(8749),B=a(6307),e=a(9669),C=a.n(e),f=function(b){(0,o.Z)(a,b);var c=(0,p.Z)(a);function a(d,e){var b;return(0,n.Z)(this,a),(b=c.call(this,d)).state={loading:!1},b}return a.prototype.render=function(){var a=this;return(0,h.jsxs)(i.Z,{sx:{width:"100%"},children:[(0,h.jsx)(i.Z,{sx:{width:"100%",padding:"16px 0",display:"flex",justifyContent:"center"},children:(0,h.jsx)(i.Z,{sx:{width:"100%",maxWidth:"300px"},children:(0,h.jsx)(i.Z,{sx:{width:"100%",height:0,paddingTop:"calc(200% / 3)",position:"relative"},children:(0,h.jsx)(i.Z,{sx:{width:"100%",height:"100%",position:"absolute",top:0},children:(0,h.jsx)(z,{margin:this.props.margin,setMargin:this.props.setMargin})})})})}),(0,h.jsx)(i.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,h.jsx)(v.Z,{variant:"outlined",endIcon:(0,h.jsx)(A.Z,{}),onClick:function(){var b;null===(b=a.props.fileInputRef.current)|| void 0===b||b.click()},sx:{width:"100%",maxWidth:"240px",borderRadius:"8px",textAlign:"center",fontSize:"calc(0.1vw + 12px)",textTransform:"unset"},children:"Choose PDF to Upload"})}),(0,h.jsx)(i.Z,{sx:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"16px"},children:(0,h.jsx)(i.Z,{sx:{width:"100%",maxWidth:"240px",display:"flex",justifyContent:"end"},children:(0,h.jsx)(v.Z,{variant:"contained",disabled:this.state.loading,endIcon:this.state.loading?(0,h.jsx)(w.Z,{size:20,sx:{color:"white"}}):(0,h.jsx)(B.Z,{}),onClick:function(){if(a.props.dataTransferList.length>0){var c=a;a.props.serialNumber.current=Math.floor(1e8+9e8*Math.random()),a.setState(function(a){return(0,k.Z)((0,j.Z)({},a),{loading:!0})});var b=new DataTransfer;a.props.dataTransferList.forEach(function(c){var a;b.items.add(null!==(a=c.file)&& void 0!==a?a:{name:null})}),C().postForm("http://ssal.sparcs.org:30180/merge",{filecount:b.files.length,"files[]":b.files,id:a.props.serialNumber.current,left:a.props.margin.left,top:a.props.margin.top,right:a.props.margin.right,bottom:a.props.margin.bottom}).then(function(a){c.setState(function(a){return(0,k.Z)((0,j.Z)({},a),{loading:!1})}),x().push("/result/".concat(c.props.serialNumber.current))}).catch(function(){c.setState(function(a){return(0,k.Z)((0,j.Z)({},a),{loading:!1})})})}},sx:{borderRadius:"8px",textAlign:"center",fontSize:"calc(0.1vw + 12px)"},children:"Create Link"})})})]})},a}(c.PureComponent),D=f;function E(){var a=window.innerWidth,b=window.innerHeight;return{width:a,height:b}}var F=function(){var a,b,m,d=(0,c.useState)(3),n=d[0],s=d[1],e=(b=(a=(0,c.useState)({width:0,height:0}))[0],m=a[1],(0,c.useEffect)(function(){var a=function(){m(E())};return m(E()),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}},[]),b),o=e.width;e.height;var f=(0,c.useRef)(null),g=(0,c.useState)([]),j=g[0],p=g[1],k=(0,c.useState)({left:"0",top:"0",right:"0",bottom:"0"}),l=k[0],q=k[1],r=(0,c.useRef)(0);return(0,c.useEffect)(function(){console.log(n),3!==n&&o<1e3&&s(3),4!==n&&o>1e3&&s(4)},[o]),(0,h.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,h.jsxs)(i.Z,{sx:{display:"flex",padding:"8px",width:"100%",maxWidth:"1200px",paddingBottom:"100px"},children:[(0,h.jsx)(i.Z,{sx:{flex:"7"},children:(0,h.jsx)(u,{dataTransferList:j,setDataTransferList:p,fileInputRef:f,itemsPerRow:n,margin:l,sx:{width:"100%",height:"min(70vh, 70vw)"}})}),(0,h.jsx)(i.Z,{sx:{flex:"3",position:"relative",verticalAlign:"baseline",boxSizing:"border-box",display:"block"},children:(0,h.jsx)(i.Z,{sx:{position:"sticky",top:"0",padding:"10px 5px"},children:(0,h.jsx)(D,{serialNumber:r,fileInputRef:f,margin:l,setMargin:q,dataTransferList:j})})})]})})}},1333:function(){},2262:function(){},4727:function(){},5028:function(){},7840:function(){}},function(a){a.O(0,[895,630,831,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])